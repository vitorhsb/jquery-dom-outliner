/*! dom-outliner - v0.1.0 - 2014-10-10
* https://github.com/vitorhsb/dom-outliner
* Copyright (c) 2014 Vitor Barbosa; Licensed MIT */
!function(a){function b(){f(),h(),e()}function c(){g(),i()}function d(a){var b=document.createElement("style");b.type="text/css",document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet?b.styleSheet.cssText=a:b.innerHTML=a}function e(){var a="."+t+" {outline: "+s.outlineWidth+"px "+s.outlineStyle+" "+s.outlineColor+";}."+t+"-label {background: "+s.outlineColor+";color: #fff;font: bold 12px/12px Helvetica, Arial, sans-serif;padding: 5px;margin: 0;position: absolute;z-index: 1000001;}."+u+" {outline: "+s.outlineWidth+"px "+s.outlineStyle+" "+s.outlineSelectedColor+";}."+v+' {opacity: 0.8 !important;-moz-opacity: 0.8 !important;filter: alpha(opacity=0.8) !important;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=($value*100))" !important;background: #F4F5F6;position: absolute;top: 0;left: 0;z-index: 2000001;min-height: 0 !important;min-width: 0 !important;}.'+w+' {background: rgba(0, 0, 0, 0);opacity: 1.0 !important;-moz-opacity: 1 !important;filter: alpha(opacity=1) !important;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=($value*100))" !important;}';d(a)}function f(){y={label:a("<div></div>").addClass(t+"-label").appendTo(A.getBody())}}function g(){a.each(y,function(a,b){b.remove()}),y={}}function h(){x={center:a('<div id="'+v+'-center" class="'+v+" "+w+'"/></div>').appendTo(A.getBody()),top:a('<div id="'+v+'-top" class="'+v+'"/></div>').appendTo(A.getBody()),right:a('<div id="'+v+'-right" class="'+v+'"/></div>').appendTo(A.getBody()),bottom:a('<div id="'+v+'-bottom" class="'+v+'"/></div>').appendTo(A.getBody()),left:a('<div id="'+v+'-left" class="'+v+'"/></div>').appendTo(A.getBody())},a.each(x,function(b,c){c.on("click."+t,function(){m(a(z))})})}function i(){a.each(x,function(a,b){b.off("click."+t).remove()}),x={}}function j(b){var c=A.getDocument(),d=c.height(),e=c.width();if(b.each(function(){a(this).addClass(u)}),s.showGlasses)try{var f=b.offset(),g=b.outerHeight(),h=b.outerWidth();x.center.css({top:f.top-s.outlineWidth,left:f.left-s.outlineWidth,height:g+2*s.outlineWidth,width:h+2*s.outlineWidth}).show(),x.top.css({top:0,left:0,height:f.top-s.outlineWidth,width:e}).show(),x.right.css({top:f.top-s.outlineWidth,left:f.left+h+s.outlineWidth,height:g+2*s.outlineWidth,width:e-f.left-h-s.outlineWidth}).show(),x.bottom.css({top:f.top+g+s.outlineWidth,left:0,height:d-f.top-g-s.outlineWidth,width:e}).show(),x.left.css({top:f.top-s.outlineWidth,left:0,height:g+2*s.outlineWidth,width:f.left-s.outlineWidth}).show()}catch(i){}finally{}}function k(b){b.each(function(){a(this).removeClass(u).off("."+t)})}function l(b){z=b,j(b),a.isFunction(s.onSelection)&&s.onSelection(b.get(0))}function m(){z&&(a.each(x,function(a,b){b.hide()}),k(a(z)),r&&a.isFunction(s.onCancel)&&s.onCancel(z),z=null)}function n(a){return s.filter&&!a.is(s.filter)||s.exclude&&a.is(s.exclude)?!0:s.excludeClosest&&a.closet(s.excludeClosest).length?!0:!1}function o(){var c;s.base=s.base||a("body"),c=a(s.base),q||b(),q=!0,r=!0,c.length&&c.off("."+t).on("mouseover."+t+" mouseout."+t+" click."+t,function(b){var c=a(b.target);if(!n(c))switch(b.type){case"click":z?m():l(c);break;case"mouseover":z&&0!==z.length||c.addClass(t);break;case"mouseout":c.removeClass(t)}})}function p(){var b=s.$base||a();r=!1,m(),c(),b.length&&b.off("."+t)}var q=!1,r=!1,s={},t="dom-outliner",u=t+"-selected",v=t+"-glass",w=t+"-transparent-glass",x={},y={},z=null,A=function(){var b=a(),c=a(),d=a();return{getWindow:function(){return b.length?b:b=a(window)},getDocument:function(){return c.length?c:c=a(document)},getBody:function(){return d.length?d:d=a("body")}}}();a.fn.outliner=function(b){return s=a.extend({},a.outliner.options,s,b),o(),m(),this.each(function(){var b=a(this).addClass(t);l(b)})},a.outliner=function(b){if(!b||"string"!=typeof b)return s=a.extend({},a.outliner.options,s,b),o(),this;switch(b){case"stop":p()}},s=a.outliner.options={base:null,outlineWidth:2,outlineStyle:"solid",outlineColor:"#c00",outlineSelectedColor:"blue",showGlasses:!0,onSelection:null,onCancel:null,filter:null,exclude:"."+t+"-glass",excludeClosest:null},a.expr[":"].outliner=function(b){return a(b).hasClass(t)||a(b).hasClass(u)}}(jQuery);